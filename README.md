# What is this?

This is a TLS server using a vendored fork of the Go TLS stack that has renegotation indication extension forcibly disabled, which will trigger CVE-2009-3555 mitigations in OpenSSL 3.0+. Note that it isn't truly vulnerable to CVE-2009-3555 because the Go TLS stack doesn't allow renegotiations at all.

The function of this program is to act as a test server for TLS clients that refuse to connect to servers with insecure client renegotiation configurations, like OpenSSL 3.0+ without the SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION option.



# Renew cert

```
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 3650 -nodes -subj "/C=XX/ST=StateName/L=CityName/O=CompanyName/OU=CompanySectionName/CN=localhost"
```


copy to `/usr/local/share/ca-certificate/`

run `update-ca-certificates`

# Usage

```
go build
./tls-test &
```

see how to configure openssl  https://github.com/npm/cli/issues/6070#issuecomment-1643427867

and test it with

```
curl https://localhost:3333
```

